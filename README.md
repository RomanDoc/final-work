# Итоговая работа

Направление: ML-инженер

Цель данной работы заключается в следующем. Создать модель для пердсказания целевого действия для сервиса "СберАвтоподписка" ("СберАвтоподписка" - это сервис долгосрочной аренды автомобилей физлиц), процент предсказаний должен быть ROC-AUC >= 0.65.

### Разделы проекта

- каталог `model` - содержит готовую модель в сериализованном виде (`loan_pipe.pickle`) и в исходном коде на языке python (`main.py`)
- каталог `exper_data` - содержит ноутбуки с эксперементальными данными по подготовке датасета и обучении разных моделей
- файл `api.py` - файл для создания api сервиса
- файл `README.md` - файл описания итоговой работы

### Этапы разработки итговой работ

1. Изучить и проанализировать датасет `session_id.csv`
2. Выделить целевую переменную
3. Произвести подготовку данных для обучении модели
4. Тренировка модели на подготовленных данных, выбор наилучшей модели
5. Сериализация модели для разработки сервиса по предсказанию
6. Разработка сервиса API

На этапе тренировки модели наилучший результат показала модель машинного обучения - "Случайный лес". Процент предсказаний ROC-AUC = 0.6789. Именно ее взял за основу своей модели.

В файле `api.py` написан сервис для предсказания результата совершения целевого действия. Данный сервис показывает следующие данные:

- \status - GET запрос, проверка работоспособности сервиса, выводит "OK" если сервис работает
- \version - GET запрос, выводит метаданные: название модели, автора, дату создания и процент предсказания.
- \predict - POST запрос, выводит id клиента и предсказание совершит ли клиент целевое действие. 1 - совершит и 0 - не совершит.

данные для отправки на предсказания результата должны быть следующей стректуры:

session_id: str
client_id: str
visit_date: str
visit_time: str
visit_number: int
utm_source: str
utm_medium: str
utm_campaign: str
utm_adcontent: str
utm_keyword: str
device_category: str
device_os: str
device_brand: str
device_model: str
device_screen_resolution: str
device_browser: str
geo_country: str
geo_city: str

Сервис написан на основе фрейсворка FastApi

Для запуска сервиса необходимо склонировать репозиторий командой:

`git clone <url>`

Далее запустить сервис командой:

`uvicorn api:app --reloa`

Сформировать POST запрос с данными описаной ранее структурой.
